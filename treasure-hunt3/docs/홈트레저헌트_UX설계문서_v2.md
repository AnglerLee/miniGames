# 홈 트레저헌트 (Home Treasure Hunt) - UX 설계문서 v2.0

> **버전:** v2.0 | **날짜:** 2026년 2월 14일
>
> **v2.0 변경사항:** 기존 `treasure-hunt/` 시스템의 UX 패턴 및 `games/` 미니게임의 UX 분석 결과를 반영

---

## 1. 핵심 가치 제안

| 가치 | 설명 |
|------|------|
| **몰입감** | 5가지 테마 스토리로 현실과 디지털의 경계를 넘나드는 모험 |
| **성취감** | 미션 클리어 → 단서 획득 → 보물 상자 해제의 단계적 보상 |
| **유대감** | 부모-자녀, 형제/자매가 함께 집안에서 보물을 찾는 경험 |
| **재사용성** | 프리셋 변경, 물건 위치 변경으로 무한 반복 가능 |

---

## 2. 사용자 역할

### 2.1 관리자 (부모)
- 게임 사전 설정 (프리셋 선택, 미션 구성, 물건 숨기기)
- PIN 인증으로 접근
- 게임 중 개입 불필요 (자동 진행)

### 2.2 플레이어 (아이)
- 스토리 따라 미션 수행
- 디지털 미니게임 + 실제 물건 찾기
- 단서 모아 보물 상자 해제

### 2.3 함께 모드 (2인)
- 2명의 아이가 협력하여 플레이
- 동시 터치 협동 게임(game21) 활용 가능

---

## 3. 사용자 플로우

### 3.1 관리자 플로우

```
메인 화면 (S01)
  → 설정 아이콘 클릭
  → 관리자 인증 (S02) - PIN 4자리
  → 관리자 대시보드 (S03)
      ├── 프리셋 선택 (5가지 테마)
      ├── 미션 구성
      │   ├── 미니게임 추가 (20개 중 선택)
      │   │   └── 게임별 난이도/시간 설정
      │   ├── 물건찾기 추가
      │   │   └── 힌트 작성 + 정답 입력
      │   └── 순서 변경 (드래그&드롭)
      ├── 보물 암호 설정 (3자리)
      └── 저장 → 메인 화면으로 복귀
```

### 3.2 플레이어 플로우

```
메인 화면 (S01)
  → "게임 시작" (또는 "이어하기")
  → 스토리 인트로 (S04) - 테마별 내레이션
  → 미션 허브 (S05) - 현재 미션 표시
      ↓ (반복)
      ├── 미니게임 (S06)
      │   → iframe으로 기존 게임 로드
      │   → 성공: 비밀번호 + 힌트 표시 → 다음 미션
      │   → 실패: 재시도 (보너스 시간) / 건너뛰기 (3회 초과)
      │
      └── 물건 찾기 (S07)
          → 힌트 카드 확인 (추가 힌트 가능)
          → 정답 입력 → 성공 시 단서 획득
      ↓ (모든 미션 완료)
  → 보물 상자 (S08)
      → 테마별 인터랙티브 암호 입력
      → 성공: 최종 보상 + 게임 완료!
```

---

## 4. 화면별 UX 설계

### 4.1 S01 - 메인 진입 화면

**목적:** 게임 시작점, 관리자 접근점

**핵심 인터랙션:**
- "게임 시작" 버튼 (게임 설정 존재 시 활성화)
- "이어하기" 버튼 (진행 중인 게임 존재 시 표시)
- 설정 아이콘 → 관리자 인증으로 이동
- 플레이어 수 선택 (1명/2명)

**UX 고려사항:**
- 게임 설정이 없을 때 명확한 안내 ("게임 설정이 필요합니다")
- 테마별 배경 이미지/색상 동적 적용

### 4.2 S02 - 관리자 인증 화면

**목적:** 아이가 설정을 변경하지 못하도록 보호

**핵심 인터랙션:**
- 4자리 PIN 입력 (숫자 키패드)
- 각 자리 입력 시 점 인디케이터 채워짐
- 올바른 PIN: 대시보드로 이동
- 잘못된 PIN: 빨간색 흔들림 애니메이션 + 초기화

**UX 고려사항:**
- 키패드 버튼: 64x64px, 터치 피드백(진동) + 클릭음
- 5회 오류 시 30초 차단 → 카운트다운 표시
- 뒤로가기 → 메인 화면

### 4.3 S03 - 관리자 대시보드

**목적:** 게임 전체 설정 구성

**핵심 인터랙션:**
- 프리셋 카드 가로 스크롤 (5장)
- 미션 리스트 드래그&드롭 정렬
- 미니게임 선택 모달 (20개 게임 그리드)
  - 게임 ID 기반 선택 (game02~game27)
  - 아이콘 + 이름 표시
  - 선택 시 난이도/시간 설정
- 물건찾기 설정 폼 (힌트 textarea + 정답 input)
- 보물 암호 3자리 입력

**UX 고려사항 (기존 구현 반영):**
- 미니게임 선택 UI는 기존 `admin.html`의 게임 카드 그리드 패턴 활용
- 각 게임 카드에 아이콘 + 이름 + 간단 설명
- 센서/카메라 게임은 아이콘 뱃지로 구분 (권한 필요 표시)
- 저장 시 즉시 localStorage 반영 + 성공 토스트

### 4.4 S04 - 스토리 인트로 화면

**목적:** 테마 몰입감 제공

**핵심 인터랙션:**
- 자동 타이핑 효과 (50ms/글자)
- "넘어가기" 탭 → 전체 텍스트 즉시 표시
- "미션 시작!" 버튼 → 미션 허브로 이동

**UX 고려사항:**
- 어두운 배경 + 테마 색상 텍스트
- 배경음(선택) 또는 타이핑 효과음

### 4.5 S05 - 미션 허브 화면

**목적:** 전체 진행 상황 파악 + 현재 미션 시작

**핵심 인터랙션:**
- 진행도 인디케이터 (완료=체크, 진행중=활성, 대기=회색)
- 현재 미션 카드 (타입 + 번호 + 스토리 + "시작!" 버튼)
- 하단: 수집한 단서 카드 리스트 (스크롤)
- 전체 타이머 (설정된 경우)

**UX 고려사항:**
- 완료된 미션은 줄 표시로 구분
- 단서 카드는 획득 시 등장 애니메이션
- "시작!" 버튼은 미션 타입에 따라 다른 아이콘

### 4.6 S06 - 미니게임 플레이 화면

> **v2.0 업데이트:** iframe 기반 게임 로드 방식 반영

**목적:** 기존 미니게임을 보물찾기 컨텍스트에서 플레이

**핵심 인터랙션:**
- 상단: 타이머 바 (8px, 시간 감소에 따라 색상 변경)
- 중앙: iframe (기존 미니게임 풀사이즈 로드)
- 성공 시: common.js가 자동으로 보물찾기 모드 감지
  - 비밀번호 표시 + 다음 힌트 표시
  - "다음 미션" 버튼 → postMessage로 부모 프레임에 통보
- 실패 시: 재시도 (보너스 시간 추가) 또는 건너뛰기

**UX 고려사항 (기존 구현 반영):**
- 각 미니게임은 독자적인 "게임 설명" 모달(`showInstructions`)을 먼저 표시
- 성공/실패 모달은 `common.js`의 통일된 UI 사용
- postMessage 통신으로 부모 프레임과 상태 동기화
- 게임별 난이도 설정은 관리자 대시보드에서 사전 구성

### 4.7 S07 - 물건 찾기 미션 화면

**목적:** 실제 집안에서 물건 찾기

**핵심 인터랙션:**
- 스토리 텍스트 카드 (테마 스타일)
- 힌트 카드 (터치 시 플립 애니메이션)
- "힌트 꺼내기" 버튼 (추가 힌트, 최대 3개)
- 정답 입력 + 확인 버튼
- 정답 비교: 공백/대소문자 무시, 다중 정답 지원

**UX 고려사항:**
- 힌트는 처음에 1개만 표시, 추가 요청 시 슬라이드 등장
- 입력 오류 시 빨간색 피드백 + 시도 횟수 표시
- 3회 초과 시 자동으로 남은 힌트 전개

### 4.8 S08 - 보물 상자 화면

**목적:** 최종 클리어 보상

**핵심 인터랙션:**
- "모든 미션 완료!" 축하 메시지 + 컨페티
- 테마별 인터랙티브 암호 입력 UI
- 암호 정답 시: 보물 상자 열림 애니메이션 + 최종 보상
- 게임 결과 요약 (등급, 시간, 시도 횟수)

---

## 5. 공통 UX 패턴 (기존 구현 기반)

### 5.1 모달 시스템

> 기존 `common.css` + `common.js`의 모달 패턴을 그대로 활용

```
┌────────────────────────┐
│         [아이콘]        │
│        제목 텍스트       │
│       설명/내용 텍스트    │
│                        │
│   [주요 버튼]  [보조 버튼] │
└────────────────────────┘
```

- 성공 모달: 비밀번호 + 힌트 + "다음 미션"/"다시 하기"/"홈으로"
- 실패 모달: 메시지 + "재시도"/"처음부터"/"홈으로"
- 설명 모달: 게임 규칙 + "게임 시작!"

### 5.2 게임 헤더 레이아웃

> 기존 미니게임 공통 레이아웃

```
[홈 버튼] [게임 제목] [타이머/통계]
──────────────────────────────────
[게임 콘텐츠 영역]
──────────────────────────────────
[조작 버튼]
```

### 5.3 효과음 시스템

> `common.js`의 Web Audio API 합성음 활용

| 이벤트 | 효과음 | 주파수 |
|--------|--------|--------|
| 성공 | 밝은 상승음 | 800Hz sine, 0.5s |
| 실패 | 낮은 하강음 | 200Hz sawtooth, 0.3s |
| 클릭 | 짧은 톡 소리 | 400Hz square, 0.1s |

### 5.4 진동 피드백

| 이벤트 | 패턴 |
|--------|------|
| 버튼 터치 | `vibrate(50)` |
| 게임 성공 | `vibrate([200, 100, 200])` |
| 최종 완료 | `vibrate([200, 100, 200, 100, 200])` |
| 게임 실패 | `vibrate(200)` |

### 5.5 터치 인터랙션

> `common.js`의 `addUnifiedEventListener()` 활용

- 모든 버튼: click + touchstart 통합 처리
- touchstart에서 `preventDefault()` 호출 (300ms 지연 방지)
- 터치 대상 최소 크기: 48x48px

---

## 6. 접근성 고려사항

| 항목 | 대응 |
|------|------|
| iOS 센서 권한 | 게임 시작 전 명시적 권한 요청 UI 표시 |
| 센서 미지원 기기 | 대체 수동 입력 모드 제공 (game17 바코드: 수동 입력) |
| iOS 진동 미지원 | 진동 API 미지원 시 무시 (기능 영향 없음) |
| 색약 고려 | game12(색깔 스피드) 등에서 텍스트 라벨 병행 |
| 터치 영역 | 모든 터치 대상 최소 48x48px |

---

## 부록: 기존 UX 설계문서 대비 변경 이력

| 항목 | 기존 (v1.0) | 업데이트 (v2.0) |
|------|-------------|-----------------|
| 미니게임 플레이 방식 | 게임 엔진이 직접 게임 실행 | iframe 기반 로드 + postMessage 통신 |
| 게임 선택 UX | 추상적 설명 | 20개 구현 게임 기반 (아이콘+이름 그리드) |
| 성공/실패 UX | 개념적 설명 | common.js 모달 시스템 상세 설명 |
| 효과음 | "효과음 재생" | Web Audio API 합성음 상세 스펙 |
| 진동 패턴 | "터치 피드백" | 이벤트별 진동 패턴 상세 명시 |
| 접근성 | 미언급 | 센서 권한, 대체 입력, 색약, 터치 영역 |
